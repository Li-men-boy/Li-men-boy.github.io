<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./node_modules/axios/dist/axios.min.js"></script>
    <script src="./node_modules/echarts/dist/echarts.js"></script>
</head>

<body>
    <div id="main" style="width: 600px;height: 400px;"></div>
    <script>
        // (function () {
        //     axios('./index.json')
        //         .then(res => {
        //             console.log(res.data.data[0]);
        //             console.log(res.data.data);
        //             let data = res.data.data
        //             one(data)
        //         })
        // }())


        // function one(data) {
        //     let arr = [];
        //     let ass = [];
        //     for (let i = 0; i < 9; i++) {
        //         ass.push(0)
        //     }
        //     for (let i = 0; i < data.length; i++) {
        //         if (arr.indexOf(data[i].praver) == -1) {
        //             arr.push(data[i].praver)
        //         }
        //     }
        //     console.log(arr);
        //     for (let i = 0; i < data.length; i++) {
        //         var index = arr.indexOf(data[i].praver);
        //         ass[index] += data[i].pay;
        //     }
        //     console.log(ass);
        // }
    </script>
    <script>
        // (function(){
        //     axios('./index.json')
        //     .then(res=>{
        //         console.log(res.data.data[0]);
        //         console.log(res.data.data);
        //         var data = res.data.data
        //         one(data)
        //     })
        // }())


        // function one(data){
        //     let arr = [];
        //     let ass = [];
        //     for (let i = 0; i < data.length; i++) {
        //         console.log(data[i].strName);
        //         if(arr.indexOf(data[i].strName)==-1){
        //             arr.push(data[i].strName);
        //         }
        //     }
        //     console.log(arr);
        //     for (let i = 0; i < data.length; i++) {
        //         var index = arr.indexOf(data[i].strName);
        //         ass[index] = data[i].pay
        //     }
        //     console.log(ass);
        // }
    </script>

    <script>
        // (function () {
        //     axios('./index.json')
        //         .then(res => {
        //             console.log(res.data.data[0]);
        //             var data = res.data.data;
        //             oned(data)
        //         })
        // }())

        // function oned(data) {
        //     let arr = [];
        //     let ass = [];
        //     for (let i = 0; i < 8; i++) {
        //         ass.push(0)
        //     }
        //     for (let i = 0; i < data.length; i++) {
        //         if (arr.indexOf(data[i].strName) == -1) {
        //             arr.push(data[i].strName)
        //         }
        //     }
        //     console.log(arr);
        //     for (let i = 0; i < data.length; i++) {
        //         var index = arr.indexOf(data[i].strName);
        //         ass[index] += data[i].pay
        //     }
        //     console.log(ass);
        // }
    </script>
    <script>
        (function () {
            axios('./index.json')
                .then(res => {
                    console.log(res.data.data[0]);
                    let data = res.data.data;
                    one(data)
                })
        }())


        function one(data) {
            let arr = [];
            let ass = [0, 0, 0, 0, 0];
            for (let i = 0; i < data.length; i++) {         // console.log(data[i].year);
                if (data[i].year % 2 == 0) {
                    if (data[i].year > 2012) {
                        if (arr.indexOf(data[i].year) == -1) {
                            arr.push(data[i].year)
                        }
                    }
                }
            }
            console.log(arr);
            for (let i = 0; i < data.length; i++) {
                var index = arr.indexOf(data[i].year); if (index != -1) {
                    ass[index] += data[i].pay
                }
            }
            console.log(ass);
            onech(arr, ass)
        }


        function onech(a, b) {
            var mysql = echarts.init(document.getElementById('main'));
            var option = {
                series: [
                    {
                        type: 'pie',
                        raduis: '50%',
                        data: [
                            { name: a[0], value: [0] },
                            { name: a[1], value: [1] },
                            { name: a[2], value: [2] },
                            { name: a[3], value: [3] },
                            { name: a[4], value: [4] }
                        ]
                    }
                ]
            };
            mysql.setOption(option)
        }
    </script>
</body>

</html>